#summary Description of Qwired Server's database structure.
#labels Phase-Design

= Qwired Server: Database Structure =

== SQL Structure ==
The Qwired server database is a small SQLite3 database that contains a number of tables. It effectively replaces the old plain text files.

{{{
CREATE TABLE qws_config (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    conf_key TEXT,
    conf_value TEXT);

CREATE TABLE qws_news (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    news_username TEXT,
    news_date TEXT,
    news_text TEXT);

CREATE TABLE qws_files (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    file_path TEXT, 
    file_type INTEGER,
    file_comment TEXT);

CREATE TABLE qws_groups (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    group_name TEXT,
    group_privs TEXT
);

CREATE TABLE qws_accounts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    acc_name TEXT,
    acc_secret TEXT,
    acc_logincount INTEGER,
    acc_privileges TEXT,
    acc_group TEXT
);

INSERT INTO "qws_accounts" VALUES(1,'admin','21232f297a57a5a743894a0e4a801fc3',NULL,'aBbPtCAfRrdMEiKpuUD','');
}}}


== Privileges Flags ==
Every account or group entry contains a mask field which defines the user's privileges. The Qwired ignores unknown fields while reading, but if an account is modified via a client, unknown flags will be lost.

|| *Privilege* || *Key* ||
|| get-user-info || i ||
|| broadcast || b ||
|| post-news || p ||
|| clear-news || C ||
|| download || d ||
|| upload || u ||
|| upload-anywhere || U ||
|| create-folders || f ||
|| alter-files || a ||
|| delete-files || r ||
|| view-dropboxes || D ||
|| create-accounts || A ||
|| edit-accounts || M ||
|| delete-accounts || R ||
|| elevate-privileges || E ||
|| kick-users || K ||
|| ban-users || B ||
|| cannot-be-kicked || P ||
|| change-topic || t ||